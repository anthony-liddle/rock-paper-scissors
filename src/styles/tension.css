/* =============================================
   TENSION STATE: CALM
   ============================================= */

.tension-calm {
  --flicker-intensity: 0;
  --jitter-amount: 0px;
  --rgb-split: 0px;
}

/* =============================================
   TENSION STATE: UNEASY
   ============================================= */

.tension-uneasy {
  --scanline-opacity: 0.12;
  animation: uneasy-jitter 4s infinite;
}

@keyframes uneasy-jitter {
  0%, 95%, 100% { transform: translate(0, 0); }
  96% { transform: translate(-1px, 0); }
  97% { transform: translate(1px, 1px); }
  98% { transform: translate(0, -1px); }
}

/* =============================================
   TENSION STATE: IRRITATED
   ============================================= */

.tension-irritated {
  --scanline-opacity: 0.18;
  animation: irritated-glitch 2s infinite;
}

@keyframes irritated-glitch {
  0%, 90%, 100% { transform: translate(0, 0); filter: none; }
  91% { transform: translate(-2px, 1px); filter: hue-rotate(30deg); }
  93% { transform: translate(3px, -1px); filter: hue-rotate(-20deg) brightness(1.3); }
  95% { transform: translate(-1px, 2px); filter: hue-rotate(10deg); }
  97% { transform: translate(2px, -2px); }
}

.tension-irritated .ascii-animation,
.tension-irritated .dialogue-text {
  text-shadow:
    0 0 4px var(--bg-dark),
    0 0 8px var(--bg-dark),
    0 0 12px var(--bg-dark),
    -2px 0 rgba(255, 0, 0, 0.4),
    2px 0 rgba(0, 100, 255, 0.4);
}

/* =============================================
   TENSION STATE: UNSTABLE
   ============================================= */

.tension-unstable {
  --scanline-opacity: 0.25;
  animation: unstable-shake 1.5s infinite;
}

@keyframes unstable-shake {
  0%, 80%, 100% { transform: translate(0, 0); }
  82% { transform: translate(-2px, 1px); }
  85% { transform: translate(2px, -2px); }
  88% { transform: translate(-3px, 1px); }
  91% { transform: translate(1px, -1px); }
  94% { transform: translate(-1px, 2px); }
}

.tension-unstable .ascii-animation,
.tension-unstable .dialogue-text {
  text-shadow:
    0 0 4px var(--bg-dark),
    0 0 8px var(--bg-dark),
    0 0 12px var(--bg-dark),
    -2px 0 rgba(255, 0, 0, 0.3),
    2px 0 rgba(0, 100, 255, 0.3);
  animation: unstable-text-glitch 2.5s infinite;
}

@keyframes unstable-text-glitch {
  0%, 90%, 100% {
    text-shadow: 0 0 4px var(--bg-dark), 0 0 8px var(--bg-dark), 0 0 12px var(--bg-dark), -2px 0 rgba(255, 0, 0, 0.3), 2px 0 rgba(0, 100, 255, 0.3);
    transform: translate(0, 0);
  }
  92% {
    text-shadow: 0 0 4px var(--bg-dark), 0 0 8px var(--bg-dark), 0 0 12px var(--bg-dark), -3px 0 rgba(255, 0, 0, 0.6), 3px 0 rgba(0, 100, 255, 0.5);
    transform: translate(-1px, 1px);
  }
  95% {
    text-shadow: 0 0 4px var(--bg-dark), 0 0 8px var(--bg-dark), 0 0 12px var(--bg-dark), 3px 0 rgba(255, 0, 0, 0.5), -2px 0 rgba(0, 100, 255, 0.6);
    transform: translate(1px, -1px);
  }
}

.tension-unstable .crt-screen::before,
.tension-unstable::before {
  animation: glitch-flicker 0.3s infinite;
}

@keyframes glitch-flicker {
  0%, 100% { opacity: 1; }
  33% { opacity: 0.85; }
  66% { opacity: 0.95; }
}

/* =============================================
   TENSION STATE: MELTDOWN
   ============================================= */

.tension-meltdown {
  --scanline-opacity: 0.30;
  animation:
    meltdown-chaos 0.4s infinite,
    glitch-background-flicker 1.5s infinite;
}

@keyframes meltdown-chaos {
  0%, 80%, 100% { transform: translate(0, 0) skewX(0deg); }
  82% { transform: translate(-5px, 3px) skewX(-2deg); }
  86% { transform: translate(5px, -3px) skewX(2deg); }
  90% { transform: translate(-6px, 2px) skewX(-2.5deg); }
  94% { transform: translate(3px, -4px) skewX(1.5deg); }
  98% { transform: translate(-2px, 5px) skewX(-1deg); }
}

@keyframes glitch-background-flicker {
  0%, 100% { background-color: var(--bg-terminal); }
  48% { background-color: var(--bg-terminal); }
  50% { background-color: #1a0d0d; }
  52% { background-color: var(--bg-terminal); }
}

.tension-meltdown .ascii-animation,
.tension-meltdown .dialogue-text {
  text-shadow:
    0 0 4px var(--bg-dark),
    0 0 8px var(--bg-dark),
    0 0 12px var(--bg-dark),
    -2px 0 rgba(255, 0, 0, 0.4),
    2px 0 rgba(0, 100, 255, 0.4);
  animation: meltdown-text-glitch 2s infinite;
}

@keyframes meltdown-text-glitch {
  0%, 92%, 100% {
    text-shadow: 0 0 4px var(--bg-dark), 0 0 8px var(--bg-dark), 0 0 12px var(--bg-dark), -2px 0 rgba(255, 0, 0, 0.4), 2px 0 rgba(0, 100, 255, 0.4);
    transform: translate(0, 0);
  }
  93% {
    text-shadow: 0 0 4px var(--bg-dark), 0 0 8px var(--bg-dark), 0 0 12px var(--bg-dark), -4px 0 rgba(255, 0, 0, 0.7), 4px 0 rgba(0, 100, 255, 0.7);
    transform: translate(-2px, 1px);
  }
  95% {
    text-shadow: 0 0 4px var(--bg-dark), 0 0 8px var(--bg-dark), 0 0 12px var(--bg-dark), 3px 0 rgba(255, 0, 0, 0.6), -3px 0 rgba(0, 100, 255, 0.5);
    transform: translate(2px, -1px);
  }
  97% {
    text-shadow: 0 0 4px var(--bg-dark), 0 0 8px var(--bg-dark), 0 0 12px var(--bg-dark), -3px 0 rgba(255, 0, 0, 0.5), 3px 0 rgba(0, 100, 255, 0.6);
    transform: translate(-1px, 2px);
  }
}

.tension-meltdown::before {
  animation: glitch-flicker 0.3s infinite;
}

/* Meltdown color bleed â€” occasional red flash */
.tension-meltdown .stage-center {
  animation: color-bleed 3s infinite;
}

@keyframes color-bleed {
  0%, 90%, 100% { filter: none; }
  93% { filter: hue-rotate(40deg) saturate(1.5) brightness(1.2); }
  96% { filter: hue-rotate(-30deg) saturate(1.3) brightness(1.1); }
}
